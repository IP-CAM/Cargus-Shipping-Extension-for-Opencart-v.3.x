function initializeCargus(e,t,n){var a=document.querySelector('script[data-widget="cargus-widget"]');useMockupdata=!!a&&"true"===a.getAttribute("use-mockup-data");let r=t.ChooseMarker,s=useMockupdata,i=n.data_endpoint,l=n.assets_path,o="pudoStorage",d=n.DEFAULT_COORDINATES||{latitude:44.42721425196829,longitude:26.102416039867997},c=[{Id:1000085,Symbol:"APM7103",Name:"Locker",LocationId:1,CountyId:44,County:"Bucuresti",CityId:150,City:"BUCURESTI",StreetId:196,StreetName:"Arghezi Tudor, poet",ZoneId:9336,PostalCode:"020941",Entrance:"",Floor:"",Apartment:"",Sector:"2",Address:"BUCURESTI, Strada Arghezi Tudor, poet, Nr. 3, Cod postal. 020941",AddressDescription:"Description",AdditionalAddressInfo:"Necesita Cargus Mobile App",Longitude:26.104956,Latitude:44.43717,PointType:55,OpenHoursMoStart:"00:00",OpenHoursMoEnd:"23:59",OpenHoursTuStart:"00:00",OpenHoursTuEnd:"23:59",OpenHoursWeStart:"00:00",OpenHoursWeEnd:"23:59",OpenHoursThStart:"00:00",OpenHoursThEnd:"23:59",OpenHoursFrStart:"00:00",OpenHoursFrEnd:"23:59",OpenHoursSaStart:"00:00",OpenHoursSaEnd:"23:59",OpenHoursSuStart:"00:00",OpenHoursSuEnd:"23:59",StreetNo:"3",PhoneNumber:"021 9282",ServiceCOD:!0,PaymentType:4,Email:"",MainPicture:"",AcceptedPaymentType:{Cash:!0,Card:!0,Online:!0}},{Id:114309,Symbol:"SG00247",Name:"Punct de ridicare",LocationId:1,CountyId:44,County:"Bucuresti",CityId:150,City:"BUCURESTI",StreetId:1205,StreetName:"Coposu Corneliu",ZoneId:5581,PostalCode:"030601",Entrance:"",Floor:"",Apartment:"",Sector:"",Address:"BUCURESTI, Piata Coposu Corneliu, Nr. 3-5, Cod postal. 030601",AddressDescription:"Punct Corneliu Coposu 3-5 este punct partener Cargus cu adresa in Bucuresti, punct de reper: service GSM.\n\nlanga farmacia Dona\n\nRidică un colet cu ușurință din punctele Cargus Ship&Go!\nCurierul a ajuns la tine c\xe2nd tu nu erai acasă? Nici o problemă. Curierul va lăsa coletul pentru tine la cel mai apropiat punct Cargus Ship&Go.\nPoți redirecționa cu un singur click coletul catre un punct Ship&Go sau poți comanda livrarea direct \xeen Punctul Cargus Ship&Go ales sau in Locker Cargus Ship&Go.\n",AdditionalAddressInfo:"",Longitude:26.1061033052418,Latitude:44.429926851278,PointType:2,OpenHoursMoStart:"09:30",OpenHoursMoEnd:"19:30",OpenHoursTuStart:"09:30",OpenHoursTuEnd:"19:30",OpenHoursWeStart:"09:30",OpenHoursWeEnd:"19:30",OpenHoursThStart:"09:30",OpenHoursThEnd:"19:30",OpenHoursFrStart:"09:30",OpenHoursFrEnd:"19:30",OpenHoursSaStart:"",OpenHoursSaEnd:"",OpenHoursSuStart:"",OpenHoursSuEnd:"",StreetNo:"3-5",PhoneNumber:"",ServiceCOD:!0,PaymentType:6,Email:"",MainPicture:"",AcceptedPaymentType:{Cash:!1,Card:!0,Online:!0}},{Id:114311,Symbol:"SG00247",Name:"Punct de ridicare",LocationId:1,CountyId:44,County:"Pitesti",CityId:150,City:"Pitesti",StreetId:1205,StreetName:"Coposu Corneliu",ZoneId:5581,PostalCode:"030601",Entrance:"",Floor:"",Apartment:"",Sector:"",Address:"Pitesti",AddressDescription:"Punct Ship&Go",AdditionalAddressInfo:"",Longitude:24.866292430481415,Latitude:44.87615920657333,PointType:2,OpenHoursMoStart:"09:30",OpenHoursMoEnd:"19:30",OpenHoursTuStart:"",OpenHoursTuEnd:"",OpenHoursWeStart:"09:30",OpenHoursWeEnd:"19:30",OpenHoursThStart:"09:30",OpenHoursThEnd:"19:30",OpenHoursFrStart:"09:30",OpenHoursFrEnd:"19:30",OpenHoursSaStart:"",OpenHoursSaEnd:"",OpenHoursSuStart:"",OpenHoursSuEnd:"",StreetNo:"3-5",PhoneNumber:"",ServiceCOD:!0,PaymentType:6,Email:"",MainPicture:"",AcceptedPaymentType:{Cash:!0,Card:!0,Online:!0}},],u={icons:{pointPinIcon:{iconUrl:`${l}/pointpin.png`},lockerPinIcon:{iconUrl:`${l}/lockerpin.png`},selectedPointPinIcon:{iconUrl:`${l}/spointpin.png`},selectedLockerPinIcon:{iconUrl:`${l}/slockerpin.png`},currentLocationIcon:{iconUrl:`${l}/allow_current_location.svg`},arrow_leftIcon:{iconUrl:`${l}/arrow-left.svg`},closeIcon:{iconUrl:`${l}/close_icon.svg`}}};function p(e){var t,a,p=document.getElementById(e),m=function e(){let t=document.createElement("div");return t.classList.add("cg-map-widget-container"),t.classList.add("cargus-map-widget"),t.id="cg-map-widget-container",t.innerHTML=`
                <span id="close-modal" style="background-image: url(${u.icons.closeIcon.iconUrl});"></span>
				<span id="cargus-current-location" style="background-image: url(${u.icons.currentLocationIcon.iconUrl});"></span>
                <div class="sidebar" id="cargus-sidebar">
                    <div class="search" id="cargus-query-container">
                        <div id="cargus-search-container">
                            <button id="cargus-clear-btn" style="display: none;">&times;</button>
							<p class="header hide-desktop"> Select Ship & Go </p>
                            <div class="search-container">
							<div class="magnify-icon-cargus-searchbar">
								<svg class="custom-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
								<path fill="#1D1D1B" d="M19.84 18.7599L16.36 15.2799C17.32 14.0799 17.92 12.5599 17.92 10.8799C17.92 8.07988 16.24 5.51988 13.64 4.43988C12.76 4.07988 11.88 3.87988 10.92 3.87988C7.08004 3.87988 3.92004 6.99988 3.92004 10.8799C3.92004 14.7599 7.04004 17.8799 10.92 17.8799C12.52 17.8799 14.04 17.3199 15.2 16.3999L18.68 19.8799C18.84 20.0399 19.04 20.1199 19.24 20.1199C19.44 20.1199 19.64 20.0399 19.8 19.8799C20.16 19.5599 20.16 19.0799 19.84 18.7599ZM5.52004 10.8799C5.52004 7.91988 7.92004 5.47988 10.92 5.47988C11.64 5.47988 12.36 5.63988 13 5.91988C15 6.75988 16.28 8.71988 16.28 10.8799C16.28 13.8399 13.88 16.2799 10.88 16.2799C7.88004 16.2799 5.52004 13.8399 5.52004 10.8799Z"/>
							</svg>  
							</div>
                            <input type="text" class="search-box" id="cargus-search-box" placeholder="Search SHIP & GO...">
                            <span id="cargus-search-reset-button" style="background-image: url(${u.icons.closeIcon.iconUrl});"></span>
                            </div>
                            <div class="cargus-filter">
                                <div id="cargus-checkbox-container">
									<button class="select_filter-button active" id="lockersButton"> Lockers </button>
									<button class="select_filter-button active" id="shipgoButton"> Ship & Go </button>
									<button class="select_filter-button active" id="filter_addressbutton"> Address </button>
                                </div>
                            </div>
                        </div>
                            <div id="cargus-search-results-container"></div>
                    </div>
                    <div class="results" id="cargus-search-results">
                        <div class="MapContainer" id="cargus-markedResult"> </div>
                        <div id="cargus-listContainer">
                            <ul id="pointList"></ul>
                        </div>
                    </div>
                </div>
                <div id="cargus-map-wrapper">
                <div id="map"></div>
                </div>
            `,document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("cargus-clear-btn"),t=document.getElementById("cargus-search-box");e&&t&&(e.addEventListener("click",n=>{n.preventDefault(),t.value="",e.style.display="none"}),t.addEventListener("input",()=>{e.style.display=t.value?"block":"none"}))}),t}();p.appendChild(m),function e(){let t=document.getElementById("cg-map-widget-container");if(t){let n=document.querySelector(".cargus-map-widget #map"),a=document.querySelector(".cargus-map-widget .sidebar");a.style.opacity="0.4",n.style.opacity="0.4",function e(t){let n=document.createElement("div");n.className="cargus-loading-screen-modal";let a=document.createElement("div");a.className="cargus-loading-circle",n.appendChild(a),t.appendChild(n)}(t)}}();let h,y,g,E=[],S,C={},O="locations",v={ID:n.KEY_MAPPING_VALUES?.ID??"Id",Latitude:n.KEY_MAPPING_VALUES?.Latitude??"Latitude",Longitude:n.KEY_MAPPING_VALUES?.Longitude??"Longitude",PointType:n.KEY_MAPPING_VALUES?.PointType??"PointType",Name:n.KEY_MAPPING_VALUES?.Name??"Name",IsSelected:n.KEY_MAPPING_VALUES?.IsSelected??"isSelected",MainPicture:n.KEY_MAPPING_VALUES?.MainPicture??"MainPicture",AcceptedPaymentType:n.KEY_MAPPING_VALUES?.AcceptedPaymentType??"AcceptedPaymentType",City:n.KEY_MAPPING_VALUES?.City??"City",Address:n.KEY_MAPPING_VALUES?.Address??"Address",AddressDescription:n.KEY_MAPPING_VALUES?.AddressDescription??"AddressDescription",StreetNo:n.KEY_MAPPING_VALUES?.StreetNo??"StreetNo",OpenHoursMoStart:n.KEY_MAPPING_VALUES?.OpenHoursMoStart??"OpenHoursMoStart",OpenHoursMoEnd:n.KEY_MAPPING_VALUES?.OpenHoursMoEnd??"OpenHoursMoEnd",OpenHoursTuStart:n.KEY_MAPPING_VALUES?.OpenHoursTuStart??"OpenHoursTuStart",OpenHoursTuEnd:n.KEY_MAPPING_VALUES?.OpenHoursTuEnd??"OpenHoursTuEnd",OpenHoursWeStart:n.KEY_MAPPING_VALUES?.OpenHoursWeStart??"OpenHoursWeStart",OpenHoursWeEnd:n.KEY_MAPPING_VALUES?.OpenHoursWeEnd??"OpenHoursWeEnd",OpenHoursThStart:n.KEY_MAPPING_VALUES?.OpenHoursThStart??"OpenHoursThStart",OpenHoursThEnd:n.KEY_MAPPING_VALUES?.OpenHoursThEnd??"OpenHoursThEnd",OpenHoursFrStart:n.KEY_MAPPING_VALUES?.OpenHoursFrStart??"OpenHoursFrStart",OpenHoursFrEnd:n.KEY_MAPPING_VALUES?.OpenHoursFrEnd??"OpenHoursFrEnd",OpenHoursSaStart:n.KEY_MAPPING_VALUES?.OpenHoursSaStart??"OpenHoursSaStart",OpenHoursSaEnd:n.KEY_MAPPING_VALUES?.OpenHoursSaEnd??"OpenHoursSaEnd",OpenHoursSuStart:n.KEY_MAPPING_VALUES?.OpenHoursSuStart??"OpenHoursSuStart",OpenHoursSuEnd:n.KEY_MAPPING_VALUES?.OpenHoursSuEnd??"OpenHoursSuEnd"},H=L.icon({iconUrl:u.icons.pointPinIcon.iconUrl,iconSize:[64,64]}),_=L.icon({iconUrl:u.icons.lockerPinIcon.iconUrl,iconSize:[64,64]}),I=L.icon({iconUrl:u.icons.selectedPointPinIcon.iconUrl,iconSize:[64,64]}),P=L.icon({iconUrl:u.icons.selectedLockerPinIcon.iconUrl,iconSize:[64,64]}),b=document.getElementById("cargus-search-box"),f=document.getElementById("cargus-search-reset-button"),A=document.getElementById("cargus-clear-btn"),N=document.getElementById("cargus-search-results-container"),T=document.querySelector("#cargus-listContainer"),M=document.querySelector("#cargus-search-container"),k=document.getElementById("lockersButton"),D=document.getElementById("filter_addressbutton"),x=document.getElementById("shipgoButton"),U=document.getElementById("cargus-sidebar"),w=document.getElementById("cargus-current-location");async function B(){try{let e=await fetch(i,{method:"GET",headers:{"content-type":"application/json"},cache:"no-cache"});if(!e.ok)throw Error("Failed to fetch PUDO data");let t=await e.json();return t}catch(n){throw console.error("Error fetching PUDO data:",n),n}}class G{constructor(e){this.data=e,this.daysOfWeek=["Luni","Marti","Miercuri","Joi","Vineri","Sambata","Duminica"]}getDayOpenHours(e,t,n){return{day:e,start:this.data[t]||null,end:this.data[n]||null}}getOpenHours(e,t){return e.day===t.day?e.start&&e.end?`${e.day}: ${e.start}-${e.end}`:`${e.day}: Closed`:e.start&&e.end?`${e.day}-${t.day}: ${e.start}-${e.end}`:`${e.day}-${t.day}: Closed`}generateSchedule(){let e=[];e.push(this.getDayOpenHours("Monday","OpenHoursMoStart","OpenHoursMoEnd")),e.push(this.getDayOpenHours("Tuesday","OpenHoursTuStart","OpenHoursTuEnd")),e.push(this.getDayOpenHours("Wednesday","OpenHoursWeStart","OpenHoursWeEnd")),e.push(this.getDayOpenHours("Thursday","OpenHoursThStart","OpenHoursThEnd")),e.push(this.getDayOpenHours("Friday","OpenHoursFrStart","OpenHoursFrEnd")),e.push(this.getDayOpenHours("Saturday","OpenHoursSaStart","OpenHoursSaEnd")),e.push(this.getDayOpenHours("Sunday","OpenHoursSuStart","OpenHoursSuEnd"));let t="",n,a;return e.forEach(e=>{void 0===n&&(n=e),void 0===a&&(a=e),(n.start!==e.start||n.end!==e.end)&&(t+=this.getOpenHours(n,a).replace(/\n/g,"<br>")+"<br>",n=e),a=e}),(t+=this.getOpenHours(n,a).replace(/\n/g,"<br>")+"<br>").trim()}}let R=new class e{constructor(){this.pointerID=null,this.latitude=null,this.longitude=null}set(e){this.pointerID=e;let t=X(e);t&&(this.latitude=t[v.Latitude],this.longitude=t[v.Longitude])}getAssociatedIcon(e=!1){let t=X(this.pointerID);if(!t)return null;let n=t.PointType,a=null;return(a=n<50?e?I:H:e?P:_).options.iconUrl}setPointerLocation(e,t){this.latitude=e,this.longitude=t}getPointerID(){return this.pointerID}getPointerLocation(){return{latitude:this.latitude,longitude:this.longitude}}clearPointerID(){this.pointerID=null,this.latitude=null,this.longitude=null}},F=new class e{constructor(){this.geocodeUrl="https://nominatim.openstreetmap.org/search?format=json&q=",this.countryCode="RO",this.results=[]}async search(e){let t=encodeURIComponent(e),n=`${this.geocodeUrl}${t}&countrycodes=${this.countryCode}`;try{let a=await fetch(n),r=await a.json();return this.results=r,this.results}catch(s){throw console.error("Error searching for address:",s),s}}};var Y=document.getElementById("cargus-search-results-container"),V=document.getElementById("cargus-listContainer"),W=new MutationObserver(function(e){clearTimeout(W.timeout),W.timeout=setTimeout(function(){z.apply()},60)}),q={childList:!0,subtree:!0,characterData:!0,attributes:!0};function K(e){let t;if(t="object"==typeof e&&e.target.options?e.target.options.Id:e,R.getPointerID()&&R.getPointerID()==t)R.clearPointerID(),ee();else{R.set(t);let{latitude:n,longitude:a}=R.getPointerLocation();j(n,a,14);let r=document.querySelector(".results");r.style.filter="blur(0px)"}es()}W.observe(Y,q),W.observe(V,q);let z=new class e{constructor(){this.results_from_map_container=document.querySelector("#cargus-listContainer"),this.results_from_search_container=document.getElementById("cargus-search-results-container"),this.sidebar=document.getElementById("cargus-sidebar"),this.search_container=document.getElementById("cargus-search-results"),this.query_container=document.getElementById("cargus-query-container"),this.markedContainer=document.getElementById("cargus-markedResult"),this.map=document.getElementById("cargus-map-wrapper"),this.search_input=document.getElementById("cargus-search-box")}isMobile(){return window.innerWidth<=768}isDesktop(){return window.innerWidth>768}watchOrientation(){window.matchMedia("(orientation: portrait)").addEventListener("change",function(e){e.matches,h.invalidateSize()})}watchSearchInput(){0==this.search_input.value.length&&es()}isDisplayedResultsEmpty(){return!(this.results_from_map_container.querySelectorAll("div").length>0)}isAnyMarkerSelected(){return!!R.getPointerID()}isSearchContainerEmpty(){return 0===this.results_from_search_container.querySelectorAll("div").length}apply(){this.watchOrientation(),this.isMobile()&&(!this.isAnyMarkerSelected()&&!this.isDisplayedResultsEmpty()&&this.isSearchContainerEmpty()&&(this.results_from_map_container.style.display="block"),this.isAnyMarkerSelected()&&!this.isDisplayedResultsEmpty()&&this.isSearchContainerEmpty()&&(this.results_from_map_container.style.display="none",this.results_from_map_container.style.filter="blur(0px)",this.search_container.style.display="block"),this.isAnyMarkerSelected()||this.isDisplayedResultsEmpty()||this.isSearchContainerEmpty()||(this.results_from_map_container.style.display="none"),this.isAnyMarkerSelected()&&this.isDisplayedResultsEmpty()&&this.isSearchContainerEmpty()&&(this.markedContainer.style.display="block",this.search_container.style.display="block"),!this.isAnyMarkerSelected()||this.isDisplayedResultsEmpty()||this.isSearchContainerEmpty()||(this.markedContainer.style.display="none"),this.isAnyMarkerSelected()&&this.isDisplayedResultsEmpty()&&!this.isSearchContainerEmpty()&&(this.results_from_map_container.style.display="none",this.markedContainer.style.display="block",this.search_container.style.display="none")),this.isDesktop()&&(this.watchSearchInput(),this.isAnyMarkerSelected()&&this.isDisplayedResultsEmpty()&&!this.isSearchContainerEmpty()&&(this.results_from_map_container.style.display="none",this.markedContainer.style.display="block",this.results_from_map_container.style.filter="blur(3px)",this.search_container.style.display="none"),!this.isAnyMarkerSelected()&&!this.isDisplayedResultsEmpty()&&this.isSearchContainerEmpty()&&(this.results_from_map_container.style.display="block",this.results_from_map_container.style.filter="blur(0px)",this.search_container.style.display="block"),this.isAnyMarkerSelected()||this.isDisplayedResultsEmpty()||this.isSearchContainerEmpty()||(this.search_container.style.display="none"),this.isAnyMarkerSelected()&&!this.isDisplayedResultsEmpty()&&this.isSearchContainerEmpty()&&(this.results_from_map_container.style.display="none",this.search_container.style.display="block",this.markedContainer.style.display="block"),!this.isAnyMarkerSelected()||this.isDisplayedResultsEmpty()||this.isSearchContainerEmpty()||(this.markedContainer.style.display="none",this.search_container.style.display="none"),this.isAnyMarkerSelected()&&this.isDisplayedResultsEmpty()&&this.isSearchContainerEmpty()&&(this.markedContainer.style.display="block",this.search_container.style.display="block"))}};function j(e,t,n=12){let a=[];return h&&(h.setView([e,t],n),h.on("moveend",function(){h.eachLayer(function(e){a.push(e)})})),es(),a}function X(e){let t=g.filter(t=>t[v.ID]===e);return t.length>0?t[0]:null}let Z=async()=>{try{let e=await J(),t;t=s?c:await B();let n=await t,a=e.transaction([O],"readwrite"),r=a.objectStore(O),i=r.clear();i.onsuccess=t=>{n.forEach(e=>{r.add(e)}),a.oncomplete=t=>{(function e(){let t=document.querySelector(".cargus-loading-screen-modal");if(t){let n=document.querySelector(".cargus-map-widget #map"),a=document.querySelector(".cargus-map-widget .sidebar");a.style.opacity="1",n.style.opacity="1",t.remove()}})(),Q(e).then(e=>{g=e,ee(),h.on("moveend",ee)}).catch(e=>{console.error("Error retrieving updated data:",e)})},a.onerror=e=>{console.error("Transaction error:",e.target.error)}},i.onerror=e=>{console.error("Clear request error:",e.target.error)}}catch(l){console.error("Error fetching or updating location data:",l)}};new Promise(e=>{navigator.geolocation||e(d),navigator.geolocation.getCurrentPosition(t=>{let n=t.coords.latitude,a=t.coords.longitude;d.latitude=n,d.longitude=a,e({latitude:n,longitude:a})},t=>{e(d)})}).then(e=>{let{latitude:t,longitude:n}=e||d;var a=10;e&&(a=16),C.latitude=e.latitude,C.longitude=e.longitude,en({latitude:t,longitude:n,initialZoom:a})});let J=()=>new Promise((e,t)=>{let n=indexedDB.open(o);n.onupgradeneeded=e=>{let n=e.target.result;if(!n.objectStoreNames.contains(O)){let a=n.createObjectStore(O,{keyPath:"id",autoIncrement:!0});a.createIndex("locationIndex","location")}let r=e.target.transaction,i=r.objectStore(O);s?c.forEach(e=>i.add(e)):B().then(e=>e.json()).then(e=>{e.forEach(e=>i.add(e))}).catch(e=>t(e))},n.onsuccess=()=>{let t=n.result;e(t)},n.onerror=e=>{t(e.target.error)}}),Q=e=>new Promise((t,n)=>{let a=e.transaction([O],"readonly"),r=a.objectStore(O),s=r.getAll();s.onsuccess=e=>{t(e.target.result)},s.onerror=e=>{n(e.target.error)}}),ee=()=>{if(h&&document.getElementById("lockersButton")&&document.getElementById("lockersButton")){let e=h.getBounds();document.getElementById("lockersButton"),document.getElementById("shipgoButton");let t=indexedDB.open(o);t.onsuccess=t=>{let n=t.target.result,a=n.transaction([O],"readonly"),r=a.objectStore(O),s=[];r.openCursor().onsuccess=t=>{let n=t.target.result;if(n){let a=n.value,r=a[v.ID],i=a[v.Longitude],l=a[v.Latitude],o=a[v.PointType],d=turf.point([i,l],{LocationID:r}),c=turf.bboxPolygon([e.getWest(),e.getSouth(),e.getEast(),e.getNorth()]);S=turf.booleanPointInPolygon(d,c);let u=a.Id===R.getPointerID(),p=k.classList.contains("active")&&o>=50,m=x.classList.contains("active")&&o<50;(S&&(p||m)||u)&&s.push(a),n.continue()}else{ea(s);let g=et(s);y?(y.clearLayers(),y.addLayer(g)):(y=g,h.addLayer(y))}}}}},et=e=>{let t=e.map(e=>{var t;let n=e[v.ID],a=e[v.Latitude],r=e[v.Longitude];e[v.Name];let s=e[v.PointType];if(e[v.IsSelected],R.getPointerID()&&R.getPointerID()==n){let i=L.canvasMarker([a,r],{radius:20,Id:n,img:{url:R.getAssociatedIcon(!0),size:[35,35],rotate:0,offset:{x:0,y:0}}}).on("click",K);return i}let l,o,d=L.canvasMarker([a,r],{Id:n,radius:20,img:{url:(s<50?H:_).options.iconUrl,size:[35,35],rotate:0,offset:{x:0,y:0}}}).on("click",(t=K,l=!1,function(...e){return l||(l=!0,o=t.apply(this,e)),o}));return d});return L.layerGroup(t)},en=async({latitude:e,longitude:t,zoom:n=15})=>{try{h=L.map("map",{preferCanvas:!0,zoomSnap:.25,zoomControl:!1,maxZoom:45,minZoom:1,wheelPxPerZoomLevel:300,zoomDelta:.55,zoom:10.5}).setView([e,t],n),L.control.zoom({position:"topright"}).addTo(h),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(h),await Z()}catch(a){console.error("Error initializing map:",a)}},ea=e=>{E=e.slice(),markerList=e.slice();let t=document.getElementById("cargus-markedResult");if(t&&(t.innerHTML=""),X(R.getPointerID())){var n,s=X(R.getPointerID());let i=markerList.findIndex(e=>e.Id===R.getPointerID());-1!==i&&markerList.splice(i,1),s[v.ID];var o=s[v.Name],c=s[v.City],m=s[v.MainPicture],h=s[v.Address];s[v.AcceptedPaymentType],s[v.StreetNo],s[v.AddressDescription],s[v.Latitude],s[v.Longitude];let y=s[v.OpenHoursMoStart],g=s[v.OpenHoursMoEnd],S=s[v.OpenHoursTuStart],C=s[v.OpenHoursTuEnd],O=s[v.OpenHoursWeStart],H=s[v.OpenHoursWeEnd],_=s[v.OpenHoursThStart],I=s[v.OpenHoursThEnd],P=s[v.OpenHoursFrStart],b=s[v.OpenHoursFrEnd],f=s[v.OpenHoursSaStart],A=s[v.OpenHoursSaEnd],N=s[v.OpenHoursSuStart],k=s[v.OpenHoursSuEnd],D=new G({OpenHoursMoStart:y,OpenHoursMoEnd:g,OpenHoursTuStart:S,OpenHoursTuEnd:C,OpenHoursWeStart:O,OpenHoursWeEnd:H,OpenHoursThStart:_,OpenHoursThEnd:I,OpenHoursFrStart:P,OpenHoursFrEnd:b,OpenHoursSaStart:f,OpenHoursSaEnd:A,OpenHoursSuStart:N,OpenHoursSuEnd:k}),x=D.generateSchedule(),U=u.icons.selectedPointPinIcon.iconUrl,w=document.createElement("div");w.className="card extended-card";let B=document.createElement("div");B.className="main";let F=document.createElement("div");F.className="icon";let Y=document.createElement("img");Y.src=U,Y.alt="Icon",F.appendChild(Y);let V=document.createElement("div");V.className="content";let W=document.createElement("p");W.className="title",W.textContent=o;let q=document.createElement("p");q.className="city",q.textContent=c;let j=document.createElement("p");j.className="adress",j.textContent=`${h}`;let Z=document.createElement("i");Z.className="fa-solid fa-arrow-right fa-rotate-180";let J=document.createElement("div");J.className="cg_leftArrow",J.style.backgroundImage=`url(${u.icons.arrow_leftIcon.iconUrl}`;let Q=document.createElement("span");Q.className="markedResultClosingButton",Q.textContent="Back to list",Q.addEventListener("click",e=>{e.preventDefault(),es(),K(s[v.ID])});let ee=document.createElement("img");ee.src=s[v.MainPicture]||`${l}/cargus_logo.png`,ee.alt="Pudo Point",V.appendChild(Q),V.appendChild(J),Q.insertBefore(J,Q.firstChild),V.appendChild(ee),V.appendChild(W),V.appendChild(q),V.appendChild(j);let et=document.createElement("div");et.className="image",B.appendChild(V),B.appendChild(et);let en=document.createElement("div");en.className="meta-data";let ea=document.createElement("div");ea.className="schedule";let er=document.createElement("span");er.className="days",er.innerHTML=x.replace(/\n/g,"<br>").replace(/Text/g,'<span style="font-family: YOUR_TEXT_FONT">Text</span>').replace(/\d{1,2}:\d{2} [APap][Mm]/g,'<span style="font-family: YOUR_HOURS_FONT">$&</span>'),ea.appendChild(er);let ei=document.createElement("div");ei.className="card-payment";let el=document.createElement("p");el.textContent="Payment methods:",el.appendChild(document.createElement("br"));let eo=document.createElement("span");if(eo.className="accepted-payment",s[v.AcceptedPaymentType].Online){let ed=document.createElement("img");ed.src=`${l}/online_pay_icon.svg`,ed.alt="Cash",eo.appendChild(ed),eo.appendChild(document.createTextNode(" Online"))}if(s[v.AcceptedPaymentType].Cash){let ec=document.createElement("img");ec.src=`${l}/cash_pay_icon.svg`,ec.alt="Cash",eo.appendChild(ec),eo.appendChild(document.createTextNode(" Cash"))}if(s[v.AcceptedPaymentType].Card){let eu=document.createElement("img");eu.src=`${l}/card_pay_icon.svg`,eu.alt="Card",eo.appendChild(eu),eo.appendChild(document.createTextNode(" Card"))}ei.appendChild(el),ei.appendChild(eo);let ep=document.createElement("div");ep.className="buttons";let em=document.createElement("div");em.classList.add("text-buttons");let eh=document.createElement("div");eh.classList.add("pinpoint-button"),eh.addEventListener("click",e=>{e.preventDefault(),function e(t,n){let a=d.latitude,r=d.longitude,s=`https://www.google.com/maps/dir/${a},${r}/${t},${n}`;window.open(s,"_blank")}(s[v.Latitude],s[v.Longitude])}),document.getElementById("cargus-search-results-container");let ey=document.querySelector(".results");ey.style.filter="blur(0px)";let eg=p.querySelector("#cargus-search-box");eg.value="";let eE=document.createElement("img");eE.src=`${l}/icon-info-circle.svg`;let eS=document.createElement("span");eS.textContent="See the route",eS.classList.add("button-text"),eh.appendChild(eE),eh.appendChild(eS),em.appendChild(eh);let e$=document.createElement("div");e$.classList.add("details-button");let eC=document.createElement("img");eC.src=`${l}/directions_icon.svg`;let eO=document.createElement("span");eO.textContent="Details",eO.classList.add("button-text"),e$.appendChild(eC),e$.appendChild(eO),em.appendChild(e$),ep.appendChild(em),e$.addEventListener("click",e=>{e.preventDefault(),function e({MainPicture:t,Address:n}){let a=function e({MainPicture:t,Address:n}){let a=document.createElement("div"),r=document.createElement("img");r.src=t||`${l}/cargus_logo.png`,r.classList.add("modal-image");let s=document.createTextNode(n),i=document.createElement("p");return i.appendChild(s),i.classList.add("modal-address"),a.appendChild(r),a.appendChild(i),a}({MainPicture:t,Address:n}),r=document.createElement("div");r.classList.add("modal","fade","cargus"),r.tabIndex="-1",r.role="dialog";let s=document.createElement("div");s.classList.add("modal-dialog");let i=document.createElement("span");i.style.backgroundImage=`url(${u.icons.closeIcon.iconUrl})`,i.textContent="",i.classList.add("close-button"),s.appendChild(i),s.role="document";let o=document.createElement("div");o.classList.add("modal-content");let d=document.createElement("img");d.classList.add("modal-img"),o.appendChild(a),s.appendChild(d),s.appendChild(o),r.appendChild(s),document.body.appendChild(r),i.addEventListener("click",e=>{e.preventDefault(),r.style.display="none"})}({MainPicture:m,Address:h})});let ev=document.createElement("button");ev.classList.add("orange-button"),ev.textContent="Set as delivery point",ev.onclick=e=>{e.preventDefault(),setTimeout(()=>{r(s)},50)},ep.appendChild(ev),en.appendChild(ea),en.appendChild(ei),en.appendChild(ep),w.appendChild(B),w.appendChild(en),t.appendChild(w)}if(document.querySelector("#cargus-markedResult .extended-card"),z.isMobile())var eH="336px",e_=2;else var eH="400px",e_=16;var eI={height:n="90%",itemHeight:120,total:markerList.length,reverse:!1,scrollerTagName:"ul",rowClassName:"MapContainer",generate(e){var t,n=document.createElement("div"),a=markerList[e];t=a[v.PointType]>50?u.icons.pointPinIcon.iconUrl:u.icons.lockerPinIcon.iconUrl;var{Id:r=v.ID,Name:s=v.Name,City:i=v.City,StreetName:o=v.StreetName,StreetNo:d=v.StreetNo,MainPicture:c=v.MainPicture,Address:m=v.Address,AcceptedPaymentType:h=v.AcceptedPaymentType}=a;let y=a[v.OpenHoursMoStart],g=a[v.OpenHoursMoEnd],E=a[v.OpenHoursTuStart],S=a[v.OpenHoursTuEnd],C=a[v.OpenHoursWeStart],O=a[v.OpenHoursWeEnd],H=a[v.OpenHoursThStart],_=a[v.OpenHoursThEnd],I=a[v.OpenHoursFrStart],P=a[v.OpenHoursFrEnd],b=a[v.OpenHoursSaStart],f=a[v.OpenHoursSaEnd],A=a[v.OpenHoursSuStart],N=a[v.OpenHoursSuEnd];schedule={OpenHoursMoStart:y,OpenHoursMoEnd:g,OpenHoursTuStart:E,OpenHoursTuEnd:S,OpenHoursWeStart:C,OpenHoursWeEnd:O,OpenHoursThStart:H,OpenHoursThEnd:_,OpenHoursFrStart:I,OpenHoursFrEnd:P,OpenHoursSaStart:b,OpenHoursSaEnd:f,OpenHoursSuStart:A,OpenHoursSuEnd:N};let T=new G(schedule),M=T.generateSchedule(),k,D=document.createElement("div");D.style.backgroundColor=k,D.className="card",D.onclick=()=>K(a[v.ID]);let x=document.createElement("div");x.className="icon";let U=document.createElement("img");U.src=t,U.alt="Icon",x.appendChild(U);let w=document.createElement("div");w.className="content";let B=document.createElement("p");B.className="title",B.textContent=s;let R=document.createElement("p");R.className="city",R.textContent=i;let F=document.createElement("p");F.className="adress",F.textContent=`${i}, ${o} ${d}`;let Y=document.createElement("span"),V=document.createElement("div");Y.className="days",Y.innerHTML=M.replace(/\n/g,"<br>").replace(/Text/g,'<span style="font-family: YOUR_TEXT_FONT">Text</span>').replace(/\d{1,2}:\d{2} [APap][Mm]/g,'<span style="font-family: YOUR_HOURS_FONT">$&</span>'),V.appendChild(Y),w.appendChild(B),w.appendChild(R),w.appendChild(F),w.appendChild(V);let W=document.createElement("div");W.className="image";let q=document.createElement("img");q.src=a[v.MainPicture]||`${l}/cargus_logo.png`,q.alt="Pudo Point",D.appendChild(w),D.appendChild(W),n.appendChild(D);let z=n.cloneNode(!0);return z.className="MapContainer XXXXXXX",z.style.position="absolute",z.style.left="-9999px",z.style.width=eH,p.appendChild(z),{element:n,height:z.offsetHeight+e_}}};a&&a.destroy();var eP=document.getElementById("cargus-listContainer");eP&&(a=HyperList.create(eP,eI)),function e(){let t=document.querySelector("#cargus-markedResult .extended-card");if(window.screen.availWidth<768&&null!==t)T.style.setProperty("display","none","important"),M.style.setProperty("display","none","important");else{let n=document.querySelector(".results");M.style.setProperty("display","block","important"),n.style.filter="blur(0px)"}}()};function er(){let e=document.createElement("button");e.type="button",e.className="btn btn-primary",e.setAttribute("data-toggle","modal"),e.setAttribute("data-target","#exampleModal"),e.textContent="Launch demo modal";let t=document.createElement("div");t.className="cargus modal fade",t.id="exampleModal",t.tabIndex="-1",t.role="dialog",t.setAttribute("aria-labelledby","exampleModalLabel"),t.setAttribute("aria-hidden","true");let n=document.createElement("div");n.className="modal-dialog",n.role="document";let a=document.createElement("div");a.className="modal-content";let r=document.createElement("div");r.className="modal-header";let s=document.createElement("h5");s.className="modal-title",s.id="exampleModalLabel",s.textContent="Modal title",r.appendChild(s);let i=document.createElement("button");i.type="button",i.className="close",i.setAttribute("data-dismiss","modal"),i.setAttribute("aria-label","Close");let l=document.createElement("span");l.setAttribute("aria-hidden","true"),l.innerHTML="&times;",i.appendChild(l),r.appendChild(i);let o=document.createElement("div");o.className="modal-body",o.textContent="...";let d=document.createElement("div");d.className="modal-footer";let c=document.createElement("button");c.type="button",c.className="btn btn-secondary",c.setAttribute("data-dismiss","modal"),c.textContent="Close";let u=document.createElement("button");u.type="button",u.className="btn btn-primary",u.textContent="Save changes",d.appendChild(c),d.appendChild(u),a.appendChild(r),a.appendChild(o),a.appendChild(d),n.appendChild(a),t.appendChild(n);let p=document.getElementById("your-parent-element-id");p.appendChild(e),p.appendChild(t);let m=document.createElement("div");m.innerHTML=modalContent;let h=m.firstElementChild;document.body.appendChild(h),$("#myModal").modal("show"),$(h).on("hidden.bs.modal",function(){document.body.removeChild(h)})}function es(){let e=document.querySelector(".results");return e&&(e.style.filter="blur(0px)",b.value="",A.style.display="none",U.style.height="",setTimeout(()=>{N.innerHTML=""},50)),!1}async function ei(){let e=b.value.toLowerCase(),t;t=!!D.classList.contains("active")&&await F.search(e);let n=indexedDB.open(o);n.onsuccess=n=>{let a=n.target.result,r=a.transaction([O],"readonly"),s=r.objectStore(O),i=[];s.openCursor().onsuccess=n=>{let a=n.target.result;if(a){let r=a.value;i.push(r),a.continue()}else{let s=new Fuse(i,{keys:["Name"],threshold:.3}),l=s.search(e,{limit:15});N.innerHTML="",function e(t,n){let a=document.querySelector(".results");if(N.innerHTML="",0===t.length&&0===b.value.length){a.style.display="flex",M.style.display="block";return}if(0===t.length&&0===n.length)return N.innerHTML="",!1;t&&t.forEach(e=>{let t=e.item[v.OpenHoursMoStart],n=e.item[v.OpenHoursMoEnd],a=e.item[v.OpenHoursTuStart],r=e.item[v.OpenHoursTuEnd],s=e.item[v.OpenHoursWeStart],i=e.item[v.OpenHoursWeEnd],l=e.item[v.OpenHoursThStart],o=e.item[v.OpenHoursThEnd],d=e.item[v.OpenHoursFrStart],c=e.item[v.OpenHoursFrEnd],p=e.item[v.OpenHoursSaStart],m=e.item[v.OpenHoursSaEnd],h=e.item[v.OpenHoursSuStart],y=e.item[v.OpenHoursSuEnd];schedule={OpenHoursMoStart:t,OpenHoursMoEnd:n,OpenHoursTuStart:a,OpenHoursTuEnd:r,OpenHoursWeStart:s,OpenHoursWeEnd:i,OpenHoursThStart:l,OpenHoursThEnd:o,OpenHoursFrStart:d,OpenHoursFrEnd:c,OpenHoursSaStart:p,OpenHoursSaEnd:m,OpenHoursSuStart:h,OpenHoursSuEnd:y};let g=new G(schedule),E=g.generateSchedule(),S=document.createElement("div");S.style.backgroundColor=e.background,S.addEventListener("click",t=>{t.preventDefault(),K(e.item.Id)}),S.classList.add("card");let C=document.createElement("div");C.classList.add("icon");let O=document.createElement("img");O.src=u.icons.selectedPointPinIcon.iconUrl,O.alt="Icon",C.appendChild(O);let H=document.createElement("div");H.classList.add("content");let _=document.createElement("p");_.classList.add("title"),_.textContent=e.item.Name;let I=document.createElement("p");I.classList.add("city"),I.textContent=e.item.City;let P=document.createElement("p");P.classList.add("address"),P.textContent=`${e.item.City}`,document.createElement("div");let b=document.createElement("span");b.className="days",b.innerHTML=E.replace(/\n/g,"<br>").replace(/Text/g,'<span style="font-family: YOUR_TEXT_FONT">Text</span>').replace(/\d{1,2}:\d{2} [APap][Mm]/g,'<span style="font-family: YOUR_HOURS_FONT">$&</span>'),H.appendChild(_),H.appendChild(P),H.append(b);let f=document.createElement("div");f.classList.add("image"),S.appendChild(H),S.appendChild(f),N.appendChild(S)}),n&&n.forEach(e=>{let t=e.lat,n=e.lon,a=e.display_name,r=document.createElement("div");r.addEventListener("click",e=>{e.preventDefault(),j(t,n,16),R.clearPointerID(),ee()}),r.classList.add("card");let s=document.createElement("div");s.classList.add("content");let i=document.createElement("p");i.classList.add("title"),i.textContent=a,s.appendChild(i),r.appendChild(s),N.appendChild(r)})}(l,t)}}},n.onerror=e=>{console.error("Database error:",e.target.error)}}document.querySelector("#cargus-map-wrapper"),A.addEventListener("click",e=>{e.preventDefault(),es()}),D.addEventListener("click",function(){D.classList.contains("active")?(D.classList.remove("active"),ei()):(D.classList.add("active"),ei())}),k.addEventListener("click",function(){k.classList.contains("active")?k.classList.remove("active"):k.classList.add("active"),ee()}),x.addEventListener("click",function(){x.classList.contains("active")?x.classList.remove("active"):x.classList.add("active"),ee()});let el=document.getElementById("close-modal"),eo,ed=(t=ei,(...e)=>{clearTimeout(eo),eo=setTimeout(()=>{t(...e)},300)});b.addEventListener("input",()=>{if(b.value.length>0){f.style.display="flex",U.style.height=window.visualViewport.height;let e=document.getElementById("cargus-search-results-container");document.querySelectorAll(".cargus-map-widget .search"),e.style.display="block"}else{f.style.display="none";let t=document.getElementById("cargus-search-results-container");t.style.display="block",U.style.height="",es()}ed()}),b.addEventListener("click",function(){window.innerWidth<=768&&(U.style.heights=window.visualViewport.height)}),w.addEventListener("click",e=>{e.preventDefault(),j(C.latitude,C.longitude,14)}),f.addEventListener("click",e=>{e.preventDefault(),es()}),el&&el.addEventListener("click",e=>{e.preventDefault(),setTimeout(()=>{closeModal()},50)})}return!function e(){let t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}(),p(e),window.initMapWidget=p,{initialize:p}}